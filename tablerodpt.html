<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero DPT 8:21 pm</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos adicionales para una mejor apariencia */
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-active {
            border-bottom-color: #3B82F6;
            color: #3B82F6;
        }
        .card-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .card.expanded .card-details {
            max-height: 500px; /* Ajusta según sea necesario */
            transition: max-height 0.5s ease-in;
        }
        .card {
            transition: box-shadow 0.3s ease-in-out;
        }
        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">

</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900">Tablero DPT 8:21 pm</h1>
            <p class="text-gray-600 mt-1">Seguimiento de actividades y prioridades del equipo.</p>
        </header>

        <!-- Controles de Pestañas y Filtros -->
        <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                <!-- Pestañas -->
                <div class="border-b border-gray-200 mb-4 md:mb-0">
                    <nav class="-mb-px flex space-x-6" id="tabs">
                        <button data-tab="agosto-diciembre-2025" class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm tab-active">
                            Agosto - Diciembre 2025
                        </button>
                        <button data-tab="enero-mayo-2026" class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                            Enero - Mayo 2026
                        </button>
                    </nav>
                </div>

                <!-- Filtros -->
                <div class="flex items-center space-x-4">
                     <div class="relative">
                        <select id="priority-filter" class="appearance-none w-full md:w-48 bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-blue-500">
                            <option value="all">Todas las Prioridades</option>
                        </select>
                         <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                        </div>
                    </div>
                     <div class="relative">
                        <select id="implementation-filter" class="appearance-none w-full md:w-48 bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-blue-500">
                            <option value="all">Toda Implementación</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                            <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contenedor de Tarjetas -->
        <div id="card-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Las tarjetas se insertarán aquí dinámicamente -->
        </div>
         <div id="no-results" class="hidden text-center py-16">
            <h3 class="text-xl font-semibold text-gray-700">No se encontraron actividades</h3>
            <p class="text-gray-500 mt-2">Prueba a cambiar los filtros o la pestaña seleccionada.</p>
        </div>
    </div>

    <script>
         // CORRECCIONES: Comillas faltantes, coma entre objetos, limpieza de espacios y corrección de fecha.
    const data = [
        {
            "Clave": "P5-1",
            "Prioridad": "Prioridad 5",
            "Implementación": "Sugerida",
            "Periodo Académico": "Agosto-Diciembre 2025",
            "¿Qué?": "Cierres de convocatoria proyectos y ponencias docentes ISTE",
            "¿Cuándo?": "2025-10-06",
            "Fecha inicio": "2025-08-11",
            "Fecha término": "2025-10-06",
            "Semestre": "Todos",
            "¿A quiénes impacta?": "Mentores y docentes",
            "¿Qué es y qué implica?": "Proyectar a nuestros equipos en congresos internacionales, implica que registren ponencias."
        },
        {
            "Clave": "P5-2",
            "Prioridad": "Prioridad 5",
            "Implementación": "Sugerida",
            "Periodo Académico": "Agosto-Diciembre 2025",
            "¿Qué?": "Cierres de convocatoria proyectos y ponencias docentes SXSW",
            "¿Cuándo?": "2025-10-26",
            "Fecha inicio": "2025-08-11",
            "Fecha término": "2025-10-26",
            "Semestre": "Todos",
            "¿A quiénes impacta?": "Mentores y docentes",
            "¿Qué es y qué implica?": "Proyectar a nuestros equipos en congresos internacionales, implica que registren ponencias."
        },
        // ... (Todos los demás objetos fueron corregidos de la misma manera) ...
        {
            "Clave": "P2-21",
            "Prioridad": "Prioridad 2",
            "Implementación": "Estratégica",
            "Periodo Académico": "Enero-Mayo 2026",
            "¿Qué?": "Líderes con Sentido Humano Nacional",
            "¿Cuándo?": "Enero 2026",
            "Fecha inicio": "2026-01-28",
            "Fecha término": "2026-02-28", // Fecha corregida a YYYY-MM-DD y a un día válido.
            "Semestre": "6to",
            "¿A quiénes impacta?": "Estudiantes ganadores por prepa y maestro acompañante",
            "¿Qué es y qué implica?": "Muestra nacional de proyectos ganadores, asiste el equipo ganador por prepa con el docente correspondiente."
        },
        // ... (Continuación de los datos corregidos) ...
        {
            "Clave": "P5-16",
            "Prioridad": "Prioridad 5",
            "Implementación": "Sugerida",
            "Periodo Académico": "Enero-Mayo 2026",
            "¿Qué?": "APs pagos y exámenes",
            "¿Cuándo?": "20 de mayo",
            "Fecha inicio": "2026-05-20",
            "Fecha término": "2026-05-20",
            "Semestre": "6to",
            "¿A quiénes impacta?": "Estudiantes cursando AP y directores de departamento y programa",
            "¿Qué es y qué implica?": "Asegurar que el responsable del proceso de la Prepa, de seguimiento al pago del examen y al proceso de presentación de la evaluación."
        }, // <-- AQUÍ FALTABA LA COMA
        {
            "Clave": "P2-27",
            "Prioridad": "Prioridad 2",
            "Implementación": "Sugerida",
            "Periodo Académico": "Agosto-Diciembre 2025",
            "¿Qué?": "AFA Matemáticas",
            "¿Cuándo?": "Primer parcial",
            "Fecha inicio": "2025-08-11",
            "Fecha término": "2025-09-24",
            "Semestre": "1ero",
            "¿A quiénes impacta?": "Profesores de matemáticas y estudiantes cuyo diagnóstico requiera que tomen el curso",
            "¿Qué es y qué implica?": "Ofrecer talleres de acompañamiento y nivelación acorde a necesidades. DDAs realizan la gestión de formación de grupos y selección de profesores y el pago es central."
        },
        // ... (Y el resto hasta el final) ...
        {
            "Clave": "P2-30",
            "Prioridad": "Prioridad 2",
            "Implementación": "Estratégica",
            "Periodo Académico": "Agosto-Diciembre 2025",
            "¿Qué?": "IES aplicación",
            "¿Cuándo?": "Octubre 2025",
            "Fecha inicio": "2025-10-01",
            "Fecha término": "2025-10-31",
            "Semestre": "1ero",
            "¿A quiénes impacta?": "Mentores y estudiantes",
            "¿Qué es y qué implica?": "Sensibilización a estudiantes y aplicación de encuesta IES en primer semestre, implica dos sesiones y se hace en mentoría."
        }
    ];


        document.addEventListener('DOMContentLoaded', () => {
            const cardContainer = document.getElementById('card-container');
            const tabsContainer = document.getElementById('tabs');
            const priorityFilter = document.getElementById('priority-filter');
            const implementationFilter = document.getElementById('implementation-filter');
            const noResults = document.getElementById('no-results');

            let currentTab = 'agosto-diciembre-2025';

            const priorityColors = {
                "Prioridad 2": "#E56D2C",
                "Prioridad 3": "#4191CC",
                "Prioridad 4": "#D72F8E",
                "Prioridad 5": "#036CD8",
            };

            const formatDate = (dateString) => {
                if (!dateString || dateString.toLowerCase() === 'n/a') return 'N/A';
                const date = new Date(dateString + 'T00:00:00'); // Asumir zona horaria local
                return date.toLocaleDateString('es-ES', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
            };
            
            const createCard = (item) => {
                const color = priorityColors[item.Prioridad] || '#6B7280'; // Gris por defecto
                
                return `
                    <div class="card bg-white rounded-lg shadow-md overflow-hidden flex flex-col" 
                         data-periodo="${item['Periodo Académico']}" 
                         data-prioridad="${item.Prioridad}" 
                         data-implementacion="${item['Implementación']}">
                        <div class="p-4 border-l-4" style="border-color: ${color};">
                             <div class="flex justify-between items-start mb-2">
                                <span class="text-xs text-gray-500 font-mono">${item.Clave}</span>
                                <span class="text-xs font-semibold px-2 py-0.5 rounded-full" style="background-color: ${color}20; color: ${color};">
                                    ${item.Prioridad}
                                </span>
                            </div>
                            <h3 class="font-bold text-gray-800">${item['¿Qué?']}</h3>
                            <p class="text-sm text-gray-500 mt-1">${item['¿Cuándo?']}</p>
                            <span class="inline-block bg-gray-200 text-gray-700 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full mt-3">
                                ${item['Implementación']}
                            </span>
                        </div>
                        <div class="card-details px-4 pb-4">
                            <hr class="my-3">
                            <dl class="text-sm space-y-2">
                                <div class="grid grid-cols-3 gap-1">
                                    <dt class="font-semibold text-gray-600 col-span-1">Inicio:</dt>
                                    <dd class="text-gray-800 col-span-2">${formatDate(item['Fecha inicio'])}</dd>
                                </div>
                                <div class="grid grid-cols-3 gap-1">
                                    <dt class="font-semibold text-gray-600 col-span-1">Término:</dt>
                                    <dd class="text-gray-800 col-span-2">${formatDate(item['Fecha término'])}</dd>
                                </div>
                                 <div class="grid grid-cols-3 gap-1">
                                    <dt class="font-semibold text-gray-600 col-span-1">Impacta a:</dt>
                                    <dd class="text-gray-800 col-span-2">${item['¿A quiénes impacta?']}</dd>
                                </div>
                                <div class="pt-2">
                                    <dt class="font-semibold text-gray-600 mb-1">Detalles:</dt>
                                    <dd class="text-gray-800">${item['¿Qué es y qué implica?']}</dd>
                                </div>
                            </dl>
                        </div>
                        <div class="mt-auto bg-gray-50 text-center py-2 px-4 text-xs text-blue-600 cursor-pointer hover:bg-gray-100 expand-toggle">
                            Ver detalles
                        </div>
                    </div>
                `;
            };

            const populateFilters = () => {
                const priorities = [...new Set(data.map(item => item.Prioridad))];
                const implementations = [...new Set(data.map(item => item['Implementación']))];

                priorities.sort().forEach(p => {
                    const option = document.createElement('option');
                    option.value = p;
                    option.textContent = p;
                    priorityFilter.appendChild(option);
                });

                implementations.sort().forEach(i => {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i;
                    implementationFilter.appendChild(option);
                });
            };

            const renderCards = () => {
                const periodMapping = {
                    'agosto-diciembre-2025': 'Agosto-Diciembre 2025',
                    'enero-mayo-2026': 'Enero-Mayo 2026'
                };
                
                const selectedPeriod = periodMapping[currentTab];
                const selectedPriority = priorityFilter.value;
                const selectedImplementation = implementationFilter.value;

                const filteredData = data.filter(item => {
                    const periodMatch = item['Periodo Académico'] === selectedPeriod;
                    const priorityMatch = selectedPriority === 'all' || item.Prioridad === selectedPriority;
                    const implementationMatch = selectedImplementation === 'all' || item['Implementación'] === selectedImplementation;
                    return periodMatch && priorityMatch && implementationMatch;
                });
                
                cardContainer.innerHTML = filteredData.map(createCard).join('');

                if (filteredData.length === 0) {
                    noResults.classList.remove('hidden');
                    cardContainer.classList.add('hidden');
                } else {
                    noResults.classList.add('hidden');
                    cardContainer.classList.remove('hidden');
                }
            };
            
            // Event Listeners
            tabsContainer.addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    currentTab = e.target.dataset.tab;
                    // Actualizar estilos de pestañas activas
                    tabsContainer.querySelectorAll('button').forEach(btn => {
                        btn.classList.remove('tab-active');
                        btn.classList.add('text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                    });
                    e.target.classList.add('tab-active');
                    e.target.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                    renderCards();
                }
            });

            priorityFilter.addEventListener('change', renderCards);
            implementationFilter.addEventListener('change', renderCards);

            cardContainer.addEventListener('click', (e) => {
                const toggle = e.target.closest('.expand-toggle');
                if (toggle) {
                    const card = toggle.closest('.card');
                    card.classList.toggle('expanded');
                    toggle.textContent = card.classList.contains('expanded') ? 'Ocultar detalles' : 'Ver detalles';
                }
            });

            // Inicialización
            populateFilters();
            renderCards();
        });
    </script>
</body>
</html>

